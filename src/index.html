<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href='./assets/css/styles.css'></link>
    <title>NEST Desktop</title>
</head>

<body>
    <div id="message"></div>

    <!-- <div id="login" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <form id="login-form">
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="password">Name:</label>
                            <input type="text" class="form-control" id="name">
                        </div>
                        <div class="form-group">
                            <label for="password">Password:</label>
                            <input type="password" class="form-control" id="password">
                        </div>
                        <button type="submit" class="btn btn-primary" data-dismiss="modal" id="login-submit">Login</button>
                    </div>
                </form>
            </div>
        </div>
    </div> -->
    <div id="content" style="display:none">
        <div class="container-fluid">
            <div class="pull-right">

                <div class="btn-group hide">
                    <button class="btn btn-default navbar-bin dropdown-toggle" type="button" data-toggle="dropdown">
                        <span class="glyphicon glyphicon-eye-open"></span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-right">
                        <li><a href="./tests/lineChart.html">Line chart</a></li>
                        <li><a href="./tests/scatterChart.html">Scatter chart</a></li>
                        <li><a href="./tests/heatmapChart.html">Heatmap chart</a></li>
                    </ul>
                </div>
                <span id="user"></span>
                <!-- <button type="button" class="btn btn-default navbar-btn" data-toggle="modal" data-target="#login">
                <span class="glyphicon glyphicon-user"></span>
            </button>
            <button type="button" class="btn btn-default" id="logout" style="display:none">
                <span class="glyphicon glyphicon-log-out"></span>
            </button> -->


                <button type="button" class="btn btn-default navbar-btn" onclick="window.close()">
                    <span class="glyphicon glyphicon-remove"></span>
                </button>
            </div>
        </div>

        <div class="container">
            <div id="message" class="alert alert-dismissible fade in" role="alert" style="display:none; position:absolute; width:auto; top:10px"></div>

            <div class="jumbotron">
                <h1>NEST desktop</h1>
                <p>
                    A desktop application for the NEural Simulation Tool. (<a href="http://www.nest-simulator.org/">http://www.nest-simulator.org/</a>)
                </p>
                <p class="hide">
                    <a class="btn btn-primary btn-lg" href="https://www.npmjs.com/package/nest-desktop" role="button">Learn more</a>
                </p>
            </div>
        </div>

        <div id="jumbotron-bg"></div>

        <div class="container">
            <div id="sim-default">
                <h4>Default simulations</h4>
                <div class="row simulation-list"></div>
            </div>

            <div id="sim-nest">
                <h4>Example simulations of NEST simulator</h4>
                <div class="row simulation-list"></div>
            </div>

            <div id="sim-user">
                <h4>Your simulations</h4>
                <div class="row simulation-list"></div>
            </div>

            <div id="sim-nuspic-1">
                <h4>Nuspic I simulations</h4>
                <div class="row simulation-list"></div>
            </div>
        </div>
</body>

<script>
    window.jQuery = $ = require('jquery')
    require('bootstrap');
    const shell = require("electron").shell;
    const fs = require('fs');

    window.app = require('./app');
    app.db.init()
    app.request.server_check()

    $('#user').html('Hi, ' + (app.config.app().get('user.name') || 'guest'))
    $('a[href^="http"]').on('click', function(event) {
        event.preventDefault();
        shell.openExternal(this.href);
    });

    setTimeout(function() {
        app.simulation.list({
            'group': 'example'
        }, '#sim-default')
        app.simulation.list({
            'group': 'nest-example'
        }, '#sim-nest')
        app.simulation.list({
            'user': app.config.app().get('user.name')
        }, '#sim-user')
        app.simulation.list({
            'group': 'nuspic-1'
        }, '#sim-nuspic-1')
        // app.simulation.list({
        //     'group': 'public'
        // }, '#sim-public')
        setTimeout(function() {
            $('#content').fadeIn()
        }, 100)
    }, fs.existsSync(__dirname + '/../data/' + app.config.app().get('db.name') + '.db') ? 1 : 1000)
</script>

</html>
